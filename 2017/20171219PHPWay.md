# PHP Way

## 概要
* 日時: 2017/12/19
* 場所: BASE株式会社
* https://base.connpass.com/event/73588/

-----
## session

### PHPでのゲームのサーバサイド開発の変遷〜PHPとの付き合い方〜
* Speeker: 株式会社サイバーエージェント SGE CTO 白井英氏
* 資料 https://speakerdeck.com/sgeengineer/phptefalsekemufalse-sahasaitokai-fa-falsebian-qian-phptofalsefu-kihe-ifang

#### SGEとは
* ゲーム系子会社12社が所属する組織
* PHP,JAVA,node.js
* 子会社ごとに技術選定が違う

#### ゲーム事業の歴史とPHP
* 2010年ソシャゲ黎明期
  - ガラケー主流
    - サーバー：オンプレ
    - CakePHP
    - puppetサーバー構築
    - デプロイはCapistrano
* 〜12年ブラウザソシャゲ後期
  - クラウド化
  - Codeigniter
  - Node.js
* 〜13年
  - TDD化
  - テスト・デプロイ自動化
  - Migration管理
  - クラウド
  - Codeigniter
  - express
* 現在
  - クラウド
  - ロジックPHP(5.x & 7.x 移行中)
  - リアルタイム通信Node.js,Photon
#### PHPとの付き合い方
* なぜPHP?
  - 今までの資産（開発・運用経験)
    - インフラ環境についてもノウハウが活かせる
  - 最初はガラケーでPHPが当時主流だった
  - ゲーム開発の特徴
    - １回作ったら終わりでない
      - ソースの寿命が長い
      - 運用があるので常にソースに手を入れる
        - 毎日リリースの可能性
        - 運用が続く限り開発が続く
  - ノウハウ重要
* Node.jsの振り返り(PHPと比べて)
  - 毎月更新がコストがかかった
    - 習熟度が低かった
    - シングルプロセスのため複数リクエストを巻き込んで死ぬ可能性
    - 技術的負債を貯めるとダメージがでかい
* PHPを使っていく楽しみ方
  - 世の中の動き技術的要素
    - コンテナ技術
    - スケールしやすいマネージドなRDB
  - PHPを新しい環境に適応させるのが楽しい
    - ブルーオーシャン(手が出しやすい)
    - PHPコミュニティ的に優しい
* 次の一手
  - GoogleAppEngine
  - 新しいサーバー代替技術
  - アプリを動かすことに集中する開発者としての原点

-----
### コネヒトが考える技術選択の仕方について
* Speeker: コネヒト株式会社 CTO 島田 達朗
* 資料: http://tech.connehito.com/entry/2017/12/20/200016

##### 使ってる
* PHP7
* Kotolin
* python

###### 大事なこと
* ユーザーに早く価値を届ける
  - 0 -> 1 が大事
* 現在の選定理由はユーザーのための意思決定を行う
  - メンバーごとに好みはあるがユーザーのためになる選定を行う

###### 使い続けてる理由
* スイッチする理由がない
* PHP7はAPIServerとしては十分早い
* アドテク的に50msみたいな要求がない限りは十分
  - それでもPHP7でなら十分対応できる

##### 継続的な技術選定で大事なこと
* 目的によって最適解は違う
* セキュリティ的にサポートが継続されているバージョンの利用をしたい
* 速度を改善したい
* 実例ではPHP7へのバージョンアップを選択した

* 新技術採用パターン
  - Docker採用
    - 自由度が高く安定した運用をしたい

##### OSS
* OSSへの貢献は将来へのリスクヘッジ
* 最新リリースや開発方針を把握していることは次の技術への下支えになる
* 技術的ブランディングにも繋がる
  - モチベーションも高まる

##### 最後に
* 未来を予測する最善の方法はそれを発明することだ(アラン・ケイ)
* 目的に合わせた選択を行う
  - 技術は手段
    - ユーザーに良い体験を届ける

-----
### PHPから別言語に変えることを考えた振り返り
* Speeker: BASE株式会社 CTO 藤川 真一
* 資料

##### PHPどうするか問題
* Cake2.xが終わったら？
* PHP5.3サポートおわってるし
* テストが全然ない
* パフォーマンス問題

##### サービス性からみた将来への仮説
* ECサービスは究極的になトランザクションあたりの戦いになりそう
* EarlyStage vs LaterStage
  - スケーラビリティと生産性
  - 会社としていつどこで誰を敵としてなにをしているべきなのか？を思想する

##### 検討
* Ruby on Rails
  - 一時期すごく流行ってた
  - 採用で市場に優れた人材多そう
    - 採用で自社の強みを打ち出せる？(アピール)
  - バージョンアップ追従は辛い？
* Python
  - 解析系に強い
  - 言語やライブラリが優れてる
    - Webニーズが弱い
* Java
  - 実績とパフォーマンス
  - 大規模サイト採用例多し
  - 今からJava?
  - 柔軟性にかける
  - スイッチングコスト
* Scala
  - スタートアップなどのNextの選択肢として採用例が多い
  - Java以上のスイッチングコスト
* Go
  - Better C
  - Viewがないとこでは早い
* PHP7
  - パフォーマンスアップ
  - コミュニティがいい
  - 型採用など順調な進化
  - ハイスキルPHP開発者の高齢化

##### 他社分析
* 技術スイッチがうまくいった企業
  - M&A話が近く存在する企業多い？
  - 元RoR技術者がCTO採用されて一括置き換え
  - 上場後で一区切りつける状態

##### 結論
* まだPHPで
* ビジネス上力不足ではない
* 相対的なWeb開発言語の役割の変化と先鋭化
  - Webとそれ以外で役割をわける
    - Web -> PHP
    - その他 -> Go
* CakePHP4が出てくる
* 人材採用面
  - ECビジネスではPHPエンジニア採用は今後も十分あり
  - Java経験者からWebサービスへの転職は技術的にスムーズ
  - 新卒系エンジニアに対しての(PHP)アピールが難しい…

##### がんばりどころ
* 選択した技術で頑張る決意
* AI時代に向けて、適材適所で頑張る

##### 会社としての技術基盤イシュー
* PHP7へのシフト
* 自動テスト化
* Cakeバージョンアップ
* マイクロサービス化
* AmazonAurora

##### 将来
* OSS貢献をしてPHP言語市場を活性化したい
* 5年以内にフルコミッタを雇いたい
  - Google, Facebookなど超絶成功企業はOS、言語を作ってる

-----

## Talk Session

##### PHP Disについて
* 歴史が深いから乗り越えられる壁になる
  - 他の言語もいずれそうなる
* 言語として進化する中で言語仕様が変わると批判にあいやすい
* 話題になってるあいだは言語として大丈夫
* ツッコミどころが多い言語
  - ストリング処理系の引数の順番とか…
  - 世の中マサカリが飛んでくる世界なので飛んで来やすい
* IPAの過去の勧告でセキュリティに問題あるからPHP使うな的なのがあった
  - セキュリティパッチはとっくに当たってる
  - 批判は残りやすい
* 生産性は学習コスト含めても高いんだけどなあ…

##### PHP好きなところ・変わってほしいところ
* 型が7で採用されたので他の言語と遜色なくなった
* 下位互換性が担保されてる
* 引数の順番がクソすぎる
* すぐ動く
  - 初心者に優しい
  - 他の言語経験者でも習得しやすい
  - 開発に集中できる
* クソコードが量産されやすい
* 一貫性を保つのが難しい
* 変化して最前線に居続けるのがすごい(今後もいけるのでは)
  - Rubyは変わらないことを柱としている

##### 5年後10年後はどう？
* 変化に対応し続けて来たのでまだ生き続けるのでは
* 初心者にもとっつきやすいのでエンジニアの確保も大丈夫そう
* 下位互換性が優れてるので今後もサポート続いていきそう
* 7への移行事例の多さはサポートに信頼がある証拠だと思う
* ただ適材適所の選択は大事(トレンドも把握し続ける必要がある)
  - ActionScriptが似てたけど万能になりすぎて自滅しすぎた感がある

##### エンジニアキャリアに求められていくこと
* 多言語の柔軟性・適合力
  - トレンドが変わりやすい
* UXの作り込み能力が実は評価される
  - 使われてるサービスを作る
  - ユーザーに価値を届ける
* 自分自身の役割を見極めてコミットしていくこと
  - 仕事として価値を出す

##### ニーズが高く採用しにくいエンジニア・ポジション
* データ解析系(python)
  - 研究気質な人が多いのでサービス系志望が少ない
* サーバーサイドエンジニア
  - 高齢化
  - ゲームで募集するとUnity技術者応募が多い
* チームプレイヤーなエンジニア
  - 市場に少ない
* Webサービスを作れるエンジニア
  - WebのUXを作り込みたいっていうエンジニア

##### CTO VPoE VPoP 等へのエンジニアキャリアパス
* 適正大事
  - コードを書かなくてもモチベートが保てるか
* やりたい人がやればいい
* 目的に対してキャリアを考える
* CTOも会社規模を大きくしていく上でチーム分離していく(複数人CTO)
* 組織、採用に責任を持つならVPoE
* プロダクトベースの事業に責任を持つならVPoP

-----
### QA
* 別の言語に強い興味を持ったエンジニアと話す時に意識してることは
  - サービスに対しての興味を喚起できなかったところを反省する
    - 別のところで好奇心を満たせなかった
    - サービスに携わることの満足感
  - 小さいものを作らせる
    - 長期的な運用を前提に意識させる
    - そこから有効なものがあれば採用する
    - ダメならしょうがない（別離）
  - ロジックで説明してもらう
    - サービスへのコミットが大事
  - 言語で転職する人は別の新しい言語が理由でいずれ転職する
* 若手PHPエンジニアを増やすには
  - PHPで新しいイケてるサービスを作る
    - PHP7はいいサービスを作るチャンス
  - サービス会社が新卒エンジニア採用できるようにする必要がある
    - SI採用が多い(Javaエンジニア)
  - SI採用のJavaエンジニアを引き剥がす(第2新卒)
  - PHPエンジニアを増やすって目的としてどうなの？
    - いいサービスが増えれば携わるエンジニアは自然と増える

### 締め
* PHPつかっているなら言語を盛り上げていきたい
  - アウトプットしていきましょう
